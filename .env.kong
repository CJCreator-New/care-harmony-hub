# Kong Gateway Docker Configuration
# Environment variables for Kong setup

# Database configuration (using PostgreSQL)
KONG_DATABASE=postgres
KONG_PG_HOST=postgres
KONG_PG_PORT=5432
KONG_PG_USER=kong
KONG_PG_PASSWORD=kong_password_2026_secure
KONG_PG_DATABASE=kong

# Admin API configuration
KONG_ADMIN_LISTEN=0.0.0.0:8001, 0.0.0.0:8444 ssl
KONG_ADMIN_GUI_LISTEN=0.0.0.0:8002, 0.0.0.0:8445 ssl
KONG_ADMIN_GUI_URL=http://localhost:8002

# Proxy configuration
KONG_PROXY_LISTEN=0.0.0.0:8000, 0.0.0.0:8443 ssl
KONG_STATUS_LISTEN=0.0.0.0:8100

# SSL/TLS configuration
KONG_SSL_CERT=/usr/local/kong/ssl/cert.pem
KONG_SSL_CERT_KEY=/usr/local/kong/ssl/key.pem

# Declarative configuration
KONG_DECLARATIVE_CONFIG=/usr/local/kong/kong.yml

# Plugins
KONG_PLUGINS=bundled,custom-auth,key-auth,cors,rate-limiting,request-transformer,response-transformer,request-size-limiting,response-ratelimiting,ip-restriction,bot-detection,loggly

# Logging
KONG_LOG_LEVEL=info
KONG_PROXY_ACCESS_LOG=/dev/stdout
KONG_ADMIN_ACCESS_LOG=/dev/stdout
KONG_PROXY_ERROR_LOG=/dev/stderr
KONG_ADMIN_ERROR_LOG=/dev/stderr

# Performance tuning
KONG_NGINX_WORKER_PROCESSES=auto
KONG_NGINX_WORKER_CONNECTIONS=1024
KONG_UPSTREAM_KEEPALIVE=60
KONG_HEADERS_UPSTREAM=X-API-Gateway,X-Request-Time,X-API-Version,X-Response-Time

# Security
KONG_ENFORCE_RBAC=on
KONG_RBAC_DEFAULT_ROLE=read-only
KONG_TRUSTED_IPS=127.0.0.1,172.16.0.0/12,192.168.0.0/16

# Health checks
KONG_HEALTHCHECKS=on
KONG_HEALTHCHECKS_THRESHOLD=2